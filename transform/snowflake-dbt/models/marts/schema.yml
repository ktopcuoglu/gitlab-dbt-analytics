version: 2

models:
  - name: mart_arr
    description: '{{ doc("mart_arr") }}'
    columns:
      - name: arr
        description: "Calculated as 12 * MRR value"
      - name: mrr_id
        tests:
            - not_null
            - unique
  - name: mart_arr_incr
    description: '{{ doc("mart_arr_incr") }}'
    columns:
      - name: primary_key
        tests:
          - not_null
  - name: charges_agg
    description: "Base table used as a starting point for all charge analyses"
    columns:
      - name: charge_id
        tests:
            - not_null
            - unique
      - name: subscription_id
        tests:
            - not_null
      - name: is_last_segment_version
        description: "A rate plan charge can have multiple versions within a charge segment, similar to how a subscription can have multiple versions. The is_last_segment_version flag identifies the last version of a rate plan charge that was invoiced to the customer."
  - name: usage_ping_mart
    description: '{{ doc("usage_ping_mart") }}'
    columns:
      - name: usage_ping_id
        tests:
          - not_null
          - unique
      - name: uuid
        tests:
          - not_null
      - name: date_id
        tests:
          - not_null        