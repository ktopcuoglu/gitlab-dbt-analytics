connection_info:
  database: GITLAB_COM_DB_NAME
  host: GITLAB_COM_DB_HOST
  pass: GITLAB_COM_DB_PASS
  port: GITLAB_COM_PG_PORT
  user: GITLAB_COM_DB_USER
tables:
  cluster_1:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_in_product_marketing_emails' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_in_product_marketing_emails
      UNION ALL
      SELECT 'gitlab_db_clusters' AS table_name
      , max(created_at)  AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters
      UNION ALL
      SELECT 'gitlab_db_cluster_projects' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_cluster_projects
      UNION ALL
      SELECT 'gitlab_db_sprints' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_sprints
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_runners' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_runners
      UNION ALL
      SELECT 'gitlab_db_users_ops_dashboard_projects' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_users_ops_dashboard_projects
      UNION ALL
      SELECT '_gitlab_db_clusters_applications_prometheus' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_prometheus 
      UNION ALL
      SELECT 'gitlab_db_prometheus_alerts' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_prometheus_alerts
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_ingress' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_ingress
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_helm' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_helm
      UNION ALL
      SELECT 'gitlab_db_path_locks' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_path_locks
      UNION ALL
      SELECT 'gitlab_db_csv_issue_imports' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_csv_issue_imports
      UNION ALL
      SELECT 'gitlab_db_cluster_providers_gcp' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_cluster_providers_gcp
      UNION ALL
      SELECT 'gitlab_db_requirements' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_requirements
      UNION ALL
      SELECT 'gitlab_db_vulnerability_issue_links' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_issue_links
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_cert_managers' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_cert_managers
      UNION ALL
      SELECT 'gitlab_db_lfs_file_locks' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_lfs_file_locks
      UNION ALL
      SELECT 'gitlab_db_operations_feature_flags' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_operations_feature_flags
      UNION ALL
      SELECT 'gitlab_db_requirements_management_test_reports' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_requirements_management_test_reports
      UNION ALL
      SELECT 'gitlab_db_issues_prometheus_alert_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_issues_prometheus_alert_events
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_elastic_stacks' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_elastic_stacks
      UNION ALL
      SELECT 'gitlab_db_group_import_states' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_group_import_states
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_knative' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_knative
      UNION ALL
      SELECT 'gitlab_db_analytics_cycle_analytics_group_stages' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_analytics_cycle_analytics_group_stages
      UNION ALL
      SELECT 'gitlab_db_cluster_providers_aws' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_cluster_providers_aws
      UNION ALL
      SELECT 'gitlab_db_ci_platform_metrics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_platform_metrics
      UNION ALL
      SELECT 'gitlab_db_jira_imports' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_jira_imports
      UNION ALL
      SELECT 'gitlab_db_bulk_imports' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_bulk_imports
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_crossplane' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_crossplane
      UNION ALL
      SELECT 'gitlab_db_alert_management_http_integrations' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_alert_management_http_integrations
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_jupyter' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_jupyter
      UNION ALL
      SELECT 'gitlab_db_zoom_meetings' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_zoom_meetings
      UNION ALL
      SELECT 'gitlab_db_grafana_integrations' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_grafana_integrations
      UNION ALL
      SELECT 'gitlab_db_epic_metrics' AS table_name
      , max(created_at) AS max_created_at
      ,c ount(*) ::bigint AS row_count
      FROM gitlab_db_epic_metrics
      UNION ALL
      SELECT 'gitlab_db_project_tracing_settings' AS table_name
      , max(created_at) AS max_created_at
      ,count(*) ::bigint AS row_count
      FROM gitlab_db_project_tracing_settings
      UNION ALL
      SELECT 'gitlab_db_application_settings' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_application_settings
      UNION ALL
      SELECT 'gitlab_db_cluster_agents' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_cluster_agents
      UNION ALL
      SELECT 'gitlab_db_cluster_agent_tokens' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_cluster_agent_tokens
      UNION ALL
      SELECT 'gitlab_db_issues_self_managed_prometheus_alert_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_issues_self_managed_prometheus_alert_events
      UNION ALL
      SELECT 'gitlab_db_ldap_group_links' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ldap_group_links
      UNION ALL
      SELECT 'gitlab_db_clusters_applications_cilium' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_applications_cilium
      UNION ALL
      SELECT 'gitlab_db_status_page_published_incidents' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_status_page_published_incidents
      UNION ALL
      SELECT 'gitlab_db_status_page_settings' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_status_page_settings
      UNION ALL
      SELECT 'gitlab_db_licenses' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_licenses
  cluster_2:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_alert_management_alerts' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_alert_management_alerts
      UNION ALL
      SELECT 'gitlab_db_epics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_epics
      UNION ALL
      SELECT 'gitlab_db_snippets' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_snippets
      UNION ALL
      SELECT 'gitlab_db_emails' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_emails
      UNION ALL
      SELECT 'gitlab_db_jira_tracker_data' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_jira_tracker_data
      UNION ALL
      SELECT 'gitlab_db_onboarding_progresses' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_onboarding_progresses
      UNION ALL
      SELECT 'gitlab_db_approval_project_rules' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_approval_project_rules
      UNION ALL
      SELECT 'gitlab_db_label_priorities' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_label_priorities
      UNION ALL
      SELECT 'gitlab_db_clusters_kubernetes_namespaces' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_clusters_kubernetes_namespaces
      UNION ALL
      SELECT 'gitlab_db_vulnerability_feedback' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_feedback
      UNION ALL
      SELECT 'gitlab_db_approver_groups' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_approver_groups
      UNION ALL
      SELECT 'gitlab_db_vulnerability_scanners' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_scanners
      UNION ALL
      SELECT 'gitlab_db_ci_triggers' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_triggers
      UNION ALL
      SELECT 'gitlab_db_packages_tags' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_packages_tags
      UNION ALL
      SELECT 'gitlab_db_terraform_states' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_terraform_states
  cluster_3:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
        SELECT 'gitlab_db_releases' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_releases
        UNION ALL
        SELECT 'gitlab_db_boards' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_boards
        UNION ALL
        SELECT 'gitlab_db_ci_runner_projects' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_ci_runner_projects
        UNION ALL
        SELECT 'gitlab_db_project_auto_devops' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_project_auto_devops
        UNION ALL
        SELECT 'gitlab_db_packages_packages' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_packages_packages
        UNION ALL
        SELECT 'gitlab_db_ci_runners' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_ci_runners
        UNION ALL
        SELECT 'gitlab_db_protected_environments' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_protected_environments
        UNION ALL
        SELECT 'gitlab_db_subscriptions' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_subscriptions
        UNION ALL
        SELECT 'gitlab_db_resource_weight_events' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_resource_weight_events
        UNION ALL
        SELECT 'gitlab_db_user_custom_attributes' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_user_custom_attributes
        UNION ALL
        SELECT 'gitlab_db_services' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_services
        UNION ALL
        SELECT 'gitlab_db_ci_group_variables' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_ci_group_variables
  cluster_4:
      dbt_source_model: true
      export_schema: 'gitlab_dotcom'
      export_table: 'gitlab_pgp_export'
      export_table_primary_key: max_created_at
      import_db: GITLAB_DB
      import_query: |-
        SELECT 'gitlab_db_security_scans' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_security_scans
        UNION ALL
        SELECT 'gitlab_db_project_custom_attributes' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_project_custom_attributes
        UNION ALL
        SELECT 'gitlab_db_environments' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_environments
        UNION ALL
        SELECT 'gitlab_db_push_rules' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_push_rules
        UNION ALL
        SELECT 'gitlab_db_identities' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_identities
        UNION ALL
        SELECT 'gitlab_db_experiment_users' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_experiment_users
        UNION ALL
        SELECT 'gitlab_db_timelogs' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_timelogs
        UNION ALL
        SELECT 'gitlab_db_web_hooks' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_web_hooks
        UNION ALL
        SELECT 'gitlab_db_vulnerability_identifiers' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_vulnerability_identifiers
        UNION ALL
        SELECT 'gitlab_db_milestones' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_milestones
        UNION ALL
        SELECT 'gitlab_db_ci_pipeline_schedule_variables' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_ci_pipeline_schedule_variables
  cluster_5:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
        SELECT 'gitlab_db_packages_package_files' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_packages_package_files
        UNION ALL
        SELECT 'gitlab_db_vulnerabilities' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_vulnerabilities
        UNION ALL
        SELECT 'gitlab_db_namespaces' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_namespaces
        UNION ALL
        SELECT 'gitlab_db_merge_requests_closing_issues' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count 
        FROM gitlab_db_merge_requests_closing_issues
        UNION ALL
        SELECT 'gitlab_db_resource_milestone_events' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_resource_milestone_events
        UNION ALL
        SELECT 'gitlab_db_user_preferences' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_user_preferences
        UNION ALL
        SELECT 'gitlab_db_lists' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_lists
        UNION ALL
        SELECT 'gitlab_db_container_expiration_policies' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_container_expiration_policies
  cluster_6:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_approval_merge_request_rules' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_approval_merge_request_rules
      UNION ALL
      SELECT 'gitlab_db_protected_branches' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_protected_branches
      UNION ALL
      SELECT 'gitlab_db_vulnerability_occurrence_identifiers' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_occurrence_identifiers
      UNION ALL
      SELECT 'gitlab_db_projects' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_projects
      UNION ALL
      SELECT 'gitlab_db_labels' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_labels
      UNION ALL
      SELECT 'gitlab_db_ci_trigger_requests' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_trigger_requests
  cluster_7:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_lfs_objects' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_lfs_objects
      UNION ALL
      SELECT 'gitlab_db_routes' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_routes
      UNION ALL
      SELECT 'gitlab_db_authentication_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_authentication_events
      UNION ALL
      SELECT 'gitlab_db_project_features' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_project_features
      UNION ALL
      SELECT 'gitlab_db_approvals' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_approvals
      UNION ALL
      SELECT 'gitlab_db_uploads' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_uploads
  cluster_8:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_merge_request_metrics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_merge_request_metrics
      UNION ALL
      SELECT 'gitlab_db_users' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_users
      UNION ALL
      SELECT 'gitlab_db_issues' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_issues
      UNION ALL
      SELECT 'gitlab_db_issue_metrics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_issue_metrics
      UNION ALL
      SELECT 'gitlab_db_notification_settings' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_notification_settings
  cluster_9:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_namespace_root_storage_statistics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_namespace_root_storage_statistics
      UNION ALL
      SELECT 'gitlab_db_project_daily_statistics' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_project_daily_statistics
      UNION ALL
      SELECT 'gitlab_db_lfs_objects_projects' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_lfs_objects_projects
      UNION ALL
      SELECT 'gitlab_db_geo_nodes' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_geo_nodes
      UNION ALL
      SELECT 'gitlab_db_group_custom_attributes' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_group_custom_attributes
  cluster_10:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
        SELECT 'gitlab_db_merge_requests' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_merge_requests
        UNION ALL
        SELECT 'gitlab_db_todos' AS table_name
        , max(created_at) AS max_created_at
        , count(*) ::bigint AS row_count
        FROM gitlab_db_todos
  gitlab_db_resource_label_events:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_resource_label_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_resource_label_events
  gitlab_db_events:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_events
  gitlab_db_vulnerability_occurrences:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_vulnerability_occurrences' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_occurrences
  gitlab_db_ci_builds:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_ci_builds' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_builds
  gitlab_db_notes:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_notes' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_notes
  gitlab_db_ci_stages:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_ci_stages' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_stages
  gitlab_db_audit_events:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_audit_events' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_audit_events
  gitlab_db_ci_pipelines:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_ci_pipelines' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_ci_pipelines
  gitlab_db_system_note_metadata:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_system_note_metadata' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_system_note_metadata
  gitlab_db_merge_request_diffs:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_merge_request_diffs' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_merge_request_diffs
  gitlab_db_vulnerability_occurrence_pipelines:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_vulnerability_occurrence_pipelines' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_vulnerability_occurrence_pipelines
  gitlab_db_deployments:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'gitlab_db_deployments' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM gitlab_db_deployments
  gitlab_db_ci_job_artifacts:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'ci_job_artifacts' AS table_name
      , MAX(created_at) AS max_created_at
      , COUNT(*) ::BIGINT AS row_count
      FROM ci_job_artifacts
  gitlab_db_ci_pipeline_schedules:
    dbt_source_model: true
    export_schema: 'gitlab_dotcom'
    export_table: 'gitlab_pgp_export'
    export_table_primary_key: max_created_at
    import_db: GITLAB_DB
    import_query: |-
      SELECT 'ci_pipeline_schedules' AS table_name
      , max(created_at) AS max_created_at
      , count(*) ::bigint AS row_count
      FROM ci_pipeline_schedules
